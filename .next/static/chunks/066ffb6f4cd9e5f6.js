(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let s=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},95468,e=>{"use strict";let s=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],95468)},63209,e=>{"use strict";let s=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},87020,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(67881),l=e.i(63209),r=e.i(31278),c=e.i(95468),n=e.i(46696);function i({transactionCount:e,accountCount:i=0,loanCount:d=0,emiCount:o=0,accountsWithWrongUserId:x=0}){let[m,h]=(0,a.useState)(!1),u=e+d+o+x,p=async()=>{h(!0);let e=n.toast.loading("ðŸ”§ Recovering your accounts and data...",{description:"This may take a few moments..."});try{let a=await fetch("/api/recover-my-account",{method:"POST"}),t=await a.json();n.toast.dismiss(e),t.success?(n.toast.success("Account Recovery Complete! ðŸŽ‰",{description:(0,s.jsxs)("div",{className:"space-y-1 text-sm mt-2",children:[t.accountsCreated>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("span",{children:[t.accountsCreated," account(s) created"]})]}),t.transactionsLinked>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("span",{children:[t.transactionsLinked," transactions linked"]})]}),t.loansLinked>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("span",{children:[t.loansLinked," loans recovered"]})]}),t.emisLinked>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("span",{children:[t.emisLinked," EMI payments recovered"]})]}),t.accountsFixed>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle2,{className:"h-4 w-4 text-green-500"}),(0,s.jsxs)("span",{children:[t.accountsFixed," account(s) ownership fixed"]})]}),(0,s.jsx)("div",{className:"pt-2 mt-2 border-t border-green-200",children:(0,s.jsxs)("p",{className:"font-bold text-green-700",children:["ðŸ’° Total Balance: $",t.totalBalance?.toFixed(2)||"0.00"]})})]}),duration:6e3}),setTimeout(()=>{window.location.reload()},1500)):n.toast.error("Recovery Failed âŒ",{description:t.error||t.message||"Unknown error occurred. Please check console for details.",duration:5e3})}catch(s){n.toast.dismiss(e),n.toast.error("Recovery Failed âŒ",{description:"An unexpected error occurred. Please check the console and try again.",duration:5e3}),console.error("Recovery error:",s)}finally{h(!1)}};return(0,s.jsxs)("div",{className:"relative overflow-hidden p-5 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-400 rounded-xl shadow-lg",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,s.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(251, 191, 36, 0.4) 10px, rgba(251, 191, 36, 0.4) 20px)"}})}),(0,s.jsxs)("div",{className:"relative flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 p-3 bg-yellow-400 rounded-full",children:(0,s.jsx)(l.AlertCircle,{className:"h-6 w-6 text-yellow-900"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h3",{className:"font-bold text-yellow-900 text-lg",children:"âš ï¸ Data Recovery Required"}),(0,s.jsxs)("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:[u," ",1===u?"Issue":"Issues"]})]}),(0,s.jsx)("p",{className:"text-sm text-yellow-800 mb-3",children:"We detected orphaned data that needs to be recovered and linked to your account:"}),(0,s.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-3 mb-4",children:(0,s.jsxs)("ul",{className:"space-y-2",children:[e>0&&(0,s.jsxs)("li",{className:"flex items-center gap-2 text-sm text-yellow-900",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"font-semibold",children:e})," ","transaction(s) without accounts"]})]}),d>0&&(0,s.jsxs)("li",{className:"flex items-center gap-2 text-sm text-yellow-900",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"font-semibold",children:d})," ","loan(s) need to be linked"]})]}),o>0&&(0,s.jsxs)("li",{className:"flex items-center gap-2 text-sm text-yellow-900",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"font-semibold",children:o})," EMI payment(s) need to be linked"]})]}),x>0&&(0,s.jsxs)("li",{className:"flex items-center gap-2 text-sm text-yellow-900",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"font-semibold",children:x})," ","account(s) with wrong ownership"]})]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(t.Button,{onClick:p,disabled:m,size:"lg",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-md hover:shadow-lg transition-all",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Recovering Data..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.CheckCircle2,{className:"mr-2 h-5 w-5"}),"Recover All Data Now"]})}),i>0&&(0,s.jsxs)("p",{className:"text-xs text-yellow-700",children:["You currently have ",i," account(s) linked"]})]})]})]})]})}e.s(["RecoveryButton",()=>i])}]);