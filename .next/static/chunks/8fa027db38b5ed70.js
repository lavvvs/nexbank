(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90768,e=>{"use strict";let t=(0,e.i(10965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],90768)},30009,e=>{"use strict";var t=e.i(93791),a=e.i(75305),r=e.i(21463),i=e.i(69136),l=e.i(70938),s=e.i(78896),o=e.i(64701),n="AlertDialog",[c,d]=(0,r.createContextScope)(n,[l.createDialogScope]),u=(0,l.createDialogScope)(),p=e=>{let{__scopeAlertDialog:a,...r}=e,i=u(a);return(0,t.jsx)(l.Root,{...i,...r,modal:!0})};p.displayName=n,a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,s=u(r);return(0,t.jsx)(l.Trigger,{...s,...i,ref:a})}).displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:a,...r}=e,i=u(a);return(0,t.jsx)(l.Portal,{...i,...r})};h.displayName="AlertDialogPortal";var g=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,s=u(r);return(0,t.jsx)(l.Overlay,{...s,...i,ref:a})});g.displayName="AlertDialogOverlay";var x="AlertDialogContent",[m,f]=c(x),j=a.forwardRef((e,r)=>{let{__scopeAlertDialog:n,children:c,...d}=e,p=u(n),h=a.useRef(null),g=(0,i.useComposedRefs)(r,h),f=a.useRef(null);return(0,t.jsx)(l.WarningProvider,{contentName:x,titleName:y,docsSlug:"alert-dialog",children:(0,t.jsx)(m,{scope:n,cancelRef:f,children:(0,t.jsxs)(l.Content,{role:"alertdialog",...p,...d,ref:g,onOpenAutoFocus:(0,s.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(o.Slottable,{children:c}),(0,t.jsx)(N,{contentRef:h})]})})})});j.displayName=x;var y="AlertDialogTitle",D=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,s=u(r);return(0,t.jsx)(l.Title,{...s,...i,ref:a})});D.displayName=y;var A="AlertDialogDescription",b=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,s=u(r);return(0,t.jsx)(l.Description,{...s,...i,ref:a})});b.displayName=A;var v=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...i}=e,s=u(r);return(0,t.jsx)(l.Close,{...s,...i,ref:a})});v.displayName="AlertDialogAction";var w="AlertDialogCancel",C=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:o}=f(w,r),n=u(r),c=(0,i.useComposedRefs)(a,o);return(0,t.jsx)(l.Close,{...n,...s,ref:c})});C.displayName=w;var N=({contentRef:e})=>{let t=`\`${x}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${x}\` by passing a \`${A}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${x}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},k=e.i(47163),F=e.i(67881);function T({...e}){return(0,t.jsx)(p,{"data-slot":"alert-dialog",...e})}function S({...e}){return(0,t.jsx)(h,{"data-slot":"alert-dialog-portal",...e})}function R({className:e,...a}){return(0,t.jsx)(g,{"data-slot":"alert-dialog-overlay",className:(0,k.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function O({className:e,...a}){return(0,t.jsxs)(S,{children:[(0,t.jsx)(R,{}),(0,t.jsx)(j,{"data-slot":"alert-dialog-content",className:(0,k.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a})]})}function L({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,k.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function M({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,k.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function z({className:e,...a}){return(0,t.jsx)(D,{"data-slot":"alert-dialog-title",className:(0,k.cn)("text-lg font-semibold",e),...a})}function P({className:e,...a}){return(0,t.jsx)(b,{"data-slot":"alert-dialog-description",className:(0,k.cn)("text-muted-foreground text-sm",e),...a})}function E({className:e,...a}){return(0,t.jsx)(v,{className:(0,k.cn)((0,F.buttonVariants)(),e),...a})}function I({className:e,...a}){return(0,t.jsx)(C,{className:(0,k.cn)((0,F.buttonVariants)({variant:"outline"}),e),...a})}e.s(["AlertDialog",()=>T,"AlertDialogAction",()=>E,"AlertDialogCancel",()=>I,"AlertDialogContent",()=>O,"AlertDialogDescription",()=>P,"AlertDialogFooter",()=>M,"AlertDialogHeader",()=>L,"AlertDialogTitle",()=>z],30009)},26773,e=>{"use strict";let t=(0,e.i(10965).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],26773)},57276,e=>{"use strict";let t=(0,e.i(10965).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],57276)},42354,e=>{"use strict";var t=e.i(93791),a=e.i(75305),r=e.i(30499),i=e.i(67881),l=e.i(63415),s=e.i(30009),o=e.i(10965);let n=(0,o.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),c=(0,o.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var d=e.i(26773),u=e.i(57276),p=e.i(90768);function h({loanId:e,loanStatus:o,userAccounts:h}){let[g,x]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),[D,A]=(0,a.useState)(!1),b=(0,r.useRouter)(),v=async()=>{x(!0);try{let t=await fetch("/api/loans/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanId:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to approve loan")}f(!1),b.refresh()}catch(e){alert(e.message||"Failed to approve loan")}finally{x(!1)}},w=async()=>{x(!0);try{let t=await fetch("/api/loans/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanId:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to reject loan")}y(!1),b.refresh()}catch(e){alert(e.message||"Failed to reject loan")}finally{x(!1)}},C=async()=>{x(!0);try{let t=await fetch("/api/loans/disburse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanId:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to disburse loan")}A(!1),b.refresh()}catch(e){alert(e.message||"Failed to disburse loan")}finally{x(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.DropdownMenu,{children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(n,{className:"h-4 w-4"})})}),(0,t.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(l.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(l.DropdownMenuSeparator,{}),"pending"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>f(!0),children:[(0,t.jsx)(c,{className:"mr-2 h-4 w-4 text-accent"}),"Approve Loan"]}),(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>y(!0),children:[(0,t.jsx)(d.XCircle,{className:"mr-2 h-4 w-4 text-destructive"}),"Reject Loan"]})]}),"approved"===o&&(0,t.jsxs)(l.DropdownMenuItem,{onClick:()=>A(!0),children:[(0,t.jsx)(u.Send,{className:"mr-2 h-4 w-4 text-primary"}),"Disburse Loan"]}),!["pending","approved"].includes(o)&&(0,t.jsx)(l.DropdownMenuItem,{disabled:!0,children:"No actions available"})]})]}),(0,t.jsx)(s.AlertDialog,{open:m,onOpenChange:f,children:(0,t.jsxs)(s.AlertDialogContent,{children:[(0,t.jsxs)(s.AlertDialogHeader,{children:[(0,t.jsx)(s.AlertDialogTitle,{children:"Approve Loan Application?"}),(0,t.jsx)(s.AlertDialogDescription,{children:"This will approve the loan application. The user will be notified and the loan will be ready for disbursement."})]}),(0,t.jsxs)(s.AlertDialogFooter,{children:[(0,t.jsx)(s.AlertDialogCancel,{disabled:g,children:"Cancel"}),(0,t.jsx)(s.AlertDialogAction,{onClick:v,disabled:g,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve"})]})]})}),(0,t.jsx)(s.AlertDialog,{open:j,onOpenChange:y,children:(0,t.jsxs)(s.AlertDialogContent,{children:[(0,t.jsxs)(s.AlertDialogHeader,{children:[(0,t.jsx)(s.AlertDialogTitle,{children:"Reject Loan Application?"}),(0,t.jsx)(s.AlertDialogDescription,{children:"This will reject the loan application. The user will be notified. This action cannot be undone."})]}),(0,t.jsxs)(s.AlertDialogFooter,{children:[(0,t.jsx)(s.AlertDialogCancel,{disabled:g,children:"Cancel"}),(0,t.jsx)(s.AlertDialogAction,{onClick:w,disabled:g,className:"bg-destructive hover:bg-destructive/90",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Rejecting..."]}):"Reject"})]})]})}),(0,t.jsx)(s.AlertDialog,{open:D,onOpenChange:A,children:(0,t.jsxs)(s.AlertDialogContent,{children:[(0,t.jsxs)(s.AlertDialogHeader,{children:[(0,t.jsx)(s.AlertDialogTitle,{children:"Disburse Loan?"}),(0,t.jsxs)(s.AlertDialogDescription,{children:["This will disburse the loan amount to the user's account and create the EMI payment schedule. Make sure the user has an active account.",0===h.length&&(0,t.jsx)("span",{className:"block mt-2 text-destructive",children:"Warning: User has no active accounts!"})]})]}),(0,t.jsxs)(s.AlertDialogFooter,{children:[(0,t.jsx)(s.AlertDialogCancel,{disabled:g,children:"Cancel"}),(0,t.jsx)(s.AlertDialogAction,{onClick:C,disabled:g||0===h.length,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Disbursing..."]}):"Disburse"})]})]})})]})}e.s(["LoanActionsDropdown",()=>h],42354)},81272,e=>{"use strict";var t=e.i(93791),a=e.i(75305),r=e.i(67881),i=e.i(90768);let l=(0,e.i(10965).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var s=e.i(22036);function o(){let[e,o]=(0,a.useState)(!1),n=async()=>{if(!confirm("This will change all 'disbursed' loans to 'active' status. Continue?"))return;o(!0);let e=s.toast.loading("Fixing loan statuses...");try{let t=await fetch("/api/admin/fix-loan-status",{method:"POST"}),a=await t.json();s.toast.dismiss(e),a.success?(s.toast.success(`Fixed ${a.loansFixed} loans!`,{description:'Changed status from "disbursed" to "active"'}),setTimeout(()=>{window.location.reload()},1e3)):s.toast.error("Failed to fix loans",{description:a.error||"Unknown error"})}catch(t){s.toast.dismiss(e),s.toast.error("Failed to fix loans",{description:"Please check console for details"}),console.error("Fix error:",t)}finally{o(!1)}};return(0,t.jsx)(r.Button,{onClick:n,disabled:e,variant:"outline",size:"sm",className:"gap-2",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin"}),"Fixing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{className:"h-4 w-4"}),"Fix Loan Status"]})})}e.s(["FixLoanStatusButton",()=>o],81272)}]);