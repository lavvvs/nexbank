{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/mongodb.ts"],"sourcesContent":["// lib/mongodb.ts\r\nimport mongoose from \"mongoose\";\r\n\r\nconst MONGO_URI = process.env.DATABASE_URL!;\r\nif (!MONGO_URI) throw new Error(\"Please define DATABASE_URL in your .env\");\r\n\r\n// Cache the connection across hot reloads (Next.js)\r\nlet cached = (global as any).mongoose;\r\n\r\nif (!cached) {\r\n  cached = (global as any).mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function dbConnect() {\r\n  if (cached.conn) return cached.conn;\r\n\r\n  if (!cached.promise) {\r\n    cached.promise = mongoose.connect(MONGO_URI).then((mongoose) => mongoose);\r\n  }\r\n  cached.conn = await cached.promise;\r\n  return cached.conn;\r\n}\r\n\r\nexport default dbConnect;\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;AACjB;;AAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,YAAY;AAC1C,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;AAEhC,oDAAoD;AACpD,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAClE;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IAEnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,WAAa;IAClE;IACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/models.ts"],"sourcesContent":["// lib/models.ts\r\nimport mongoose, { Schema, Document } from \"mongoose\";\r\n\r\nconst { ObjectId } = Schema.Types;\r\n\r\n// =======================\r\n// 1️⃣ Profile\r\n// =======================\r\nexport interface IProfile extends Document {\r\n  clerkId: string; // Changed: Add clerkId as the primary identifier\r\n  email: string;\r\n  fullName?: string;\r\n  phone?: string;\r\n  address?: string;\r\n  kycStatus: string;\r\n  isAdmin: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst ProfileSchema = new Schema<IProfile>(\r\n  {\r\n    clerkId: { type: String, unique: true, required: true }, // Changed: Use Clerk ID\r\n    email: { type: String, unique: true, required: true },\r\n    fullName: String,\r\n    phone: String,\r\n    address: String,\r\n    kycStatus: { type: String, default: \"pending\" },\r\n    isAdmin: { type: Boolean, default: false },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// =======================\r\n// 2️⃣ Account\r\n// =======================\r\nexport interface IAccount extends Document {\r\n  userId: string; // Changed: String instead of ObjectId\r\n  accountNumber: string;\r\n  accountType: string;\r\n  balance: number;\r\n  currency: string;\r\n  status: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst AccountSchema = new Schema<IAccount>(\r\n  {\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    accountNumber: { type: String, unique: true, required: true },\r\n    accountType: String,\r\n    balance: { type: Number, default: 0 },\r\n    currency: { type: String, default: \"USD\" },\r\n    status: { type: String, default: \"active\" },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// =======================\r\n// 3️⃣ Transaction\r\n// =======================\r\nexport interface ITransaction extends Document {\r\n  userId: string; // Changed: String instead of ObjectId\r\n  accountId: mongoose.Types.ObjectId;\r\n  amount: number;\r\n  type: string;\r\n  status: string;\r\n  description?: string;\r\n  referenceId?: string;\r\n  recipientAccountId?: mongoose.Types.ObjectId;\r\n  recipientUserId?: string; // Changed: String instead of ObjectId\r\n  createdAt: Date;\r\n}\r\n\r\nconst TransactionSchema = new Schema<ITransaction>(\r\n  {\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    accountId: { type: ObjectId, ref: \"Account\", required: true },\r\n    amount: { type: Number, required: true },\r\n    type: { type: String, required: true },\r\n    status: { type: String, default: \"completed\" },\r\n    description: String,\r\n    referenceId: String,\r\n    recipientAccountId: { type: ObjectId, ref: \"Account\" },\r\n    recipientUserId: { type: String }, // Changed: String for Clerk ID\r\n  },\r\n  { timestamps: { createdAt: true, updatedAt: false } }\r\n);\r\n\r\n// =======================\r\n// 4️⃣ Loan\r\n// =======================\r\nexport interface ILoan extends Document {\r\n  userId: string; // Changed: String instead of ObjectId\r\n  loanType: string;\r\n  amount: number;\r\n  interestRate: number;\r\n  tenureMonths: number;\r\n  emiAmount: number;\r\n  totalPayable: number;\r\n  amountPaid: number;\r\n  remainingAmount?: number;\r\n  status: string;\r\n  disbursementAccountId?: mongoose.Types.ObjectId;\r\n  approvedBy?: string; // Changed: String instead of ObjectId\r\n  approvedAt?: Date;\r\n  disbursedAt?: Date;\r\n  nextEmiDate?: Date;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst LoanSchema = new Schema<ILoan>(\r\n  {\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    loanType: String,\r\n    amount: Number,\r\n    interestRate: Number,\r\n    tenureMonths: Number,\r\n    emiAmount: Number,\r\n    totalPayable: Number,\r\n    amountPaid: { type: Number, default: 0 },\r\n    remainingAmount: Number,\r\n    status: { type: String, default: \"pending\" },\r\n    disbursementAccountId: { type: ObjectId, ref: \"Account\" },\r\n    approvedBy: { type: String }, // Changed: String for Clerk ID\r\n    approvedAt: Date,\r\n    disbursedAt: Date,\r\n    nextEmiDate: Date,\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// =======================\r\n// 5️⃣ EmiPayment\r\n// =======================\r\nexport interface IEmiPayment extends Document {\r\n  loanId: mongoose.Types.ObjectId;\r\n  userId: string; // Changed: String instead of ObjectId\r\n  emiNumber: number;\r\n  amount: number;\r\n  principalAmount: number;\r\n  interestAmount: number;\r\n  dueDate: Date;\r\n  paidDate?: Date;\r\n  status: string;\r\n  stripePaymentId?: string;\r\n  transactionId?: mongoose.Types.ObjectId;\r\n  createdAt: Date;\r\n}\r\n\r\nconst EmiPaymentSchema = new Schema<IEmiPayment>(\r\n  {\r\n    loanId: { type: ObjectId, ref: \"Loan\", required: true },\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    emiNumber: Number,\r\n    amount: Number,\r\n    principalAmount: Number,\r\n    interestAmount: Number,\r\n    dueDate: Date,\r\n    paidDate: Date,\r\n    status: { type: String, default: \"pending\" },\r\n    stripePaymentId: String,\r\n    transactionId: { type: ObjectId, ref: \"Transaction\" },\r\n  },\r\n  { timestamps: { createdAt: true, updatedAt: false } }\r\n);\r\n\r\n// =======================\r\n// 6️⃣ BankSetting\r\n// =======================\r\nexport interface IBankSetting extends Document {\r\n  settingKey: string;\r\n  settingValue: string;\r\n  description?: string;\r\n  updatedBy?: string; // Changed: String instead of ObjectId\r\n  updatedAt: Date;\r\n}\r\n\r\nconst BankSettingSchema = new Schema<IBankSetting>(\r\n  {\r\n    settingKey: { type: String, unique: true },\r\n    settingValue: String,\r\n    description: String,\r\n    updatedBy: { type: String }, // Changed: String for Clerk ID\r\n  },\r\n  { timestamps: { createdAt: false, updatedAt: true } }\r\n);\r\n\r\n// =======================\r\n// Export all models\r\n// =======================\r\nexport const Profile =\r\n  mongoose.models.Profile || mongoose.model(\"Profile\", ProfileSchema);\r\nexport const Account =\r\n  mongoose.models.Account || mongoose.model(\"Account\", AccountSchema);\r\nexport const Transaction =\r\n  mongoose.models.Transaction ||\r\n  mongoose.model(\"Transaction\", TransactionSchema);\r\nexport const Loan = mongoose.models.Loan || mongoose.model(\"Loan\", LoanSchema);\r\nexport const EmiPayment =\r\n  mongoose.models.EmiPayment || mongoose.model(\"EmiPayment\", EmiPaymentSchema);\r\nexport const BankSetting =\r\n  mongoose.models.BankSetting ||\r\n  mongoose.model(\"BankSetting\", BankSettingSchema);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/app/api/loans/pay-emi/route.ts"],"sourcesContent":["// app/actions/emi.ts\r\n\"use server\";\r\n\r\nimport dbConnect from \"@/lib/mongodb\";\r\nimport { Loan, EmiPayment } from \"@/lib/models\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\n// Calculate EMI using reducing balance method\r\nfunction calculateEMI(\r\n  principal: number,\r\n  annualRate: number,\r\n  tenureMonths: number\r\n) {\r\n  const monthlyRate = annualRate / 12 / 100;\r\n  const emi =\r\n    (principal * monthlyRate * Math.pow(1 + monthlyRate, tenureMonths)) /\r\n    (Math.pow(1 + monthlyRate, tenureMonths) - 1);\r\n  return Math.round(emi * 100) / 100;\r\n}\r\n\r\n// Generate EMI schedule when loan is approved/disbursed\r\nexport async function generateEMISchedule(\r\n  loanId: string,\r\n  startDate: Date,\r\n  firstEMIDate?: Date\r\n) {\r\n  await dbConnect();\r\n\r\n  const loan = await Loan.findById(loanId);\r\n  if (!loan) throw new Error(\"Loan not found\");\r\n\r\n  // Calculate EMI amount\r\n  const emiAmount = calculateEMI(\r\n    loan.amount,\r\n    loan.interestRate,\r\n    loan.tenureMonths\r\n  );\r\n\r\n  // Calculate total payable and interest\r\n  const totalPayable = emiAmount * loan.tenureMonths;\r\n  const totalInterest = totalPayable - loan.amount;\r\n\r\n  // Update loan with calculated values\r\n  loan.emiAmount = emiAmount;\r\n  loan.totalPayable = totalPayable;\r\n  loan.remainingAmount = totalPayable;\r\n  await loan.save();\r\n\r\n  // Delete existing EMI schedule if any (in case of regeneration)\r\n  await EmiPayment.deleteMany({ loanId });\r\n\r\n  // Generate EMI schedule\r\n  const emiSchedule = [];\r\n  let remainingPrincipal = loan.amount;\r\n  const monthlyRate = loan.interestRate / 12 / 100;\r\n\r\n  // Use provided first EMI date or calculate based on loan start date\r\n  let currentDate = firstEMIDate ? new Date(firstEMIDate) : new Date(startDate);\r\n  if (!firstEMIDate) {\r\n    currentDate.setMonth(currentDate.getMonth() + 1);\r\n  }\r\n\r\n  for (let i = 1; i <= loan.tenureMonths; i++) {\r\n    // Calculate interest and principal for this EMI\r\n    const interestForMonth = remainingPrincipal * monthlyRate;\r\n    const principalForMonth = emiAmount - interestForMonth;\r\n    remainingPrincipal -= principalForMonth;\r\n\r\n    // Ensure remaining principal doesn't go negative due to rounding\r\n    if (remainingPrincipal < 0) remainingPrincipal = 0;\r\n\r\n    emiSchedule.push({\r\n      loanId: loan._id,\r\n      userId: loan.userId,\r\n      emiNumber: i,\r\n      dueDate: new Date(currentDate),\r\n      amount: emiAmount,\r\n      principalAmount: Math.round(principalForMonth * 100) / 100,\r\n      interestAmount: Math.round(interestForMonth * 100) / 100,\r\n      status: \"pending\",\r\n    });\r\n\r\n    // Move to next month\r\n    currentDate.setMonth(currentDate.getMonth() + 1);\r\n  }\r\n\r\n  // Save all EMI records\r\n  await EmiPayment.insertMany(emiSchedule);\r\n\r\n  console.log(\r\n    `✅ Generated ${emiSchedule.length} EMI payments for loan ${loanId}`,\r\n    {\r\n      emiAmount,\r\n      totalPayable,\r\n      totalInterest,\r\n      firstEmiDate: emiSchedule[0].dueDate,\r\n      lastEmiDate: emiSchedule[emiSchedule.length - 1].dueDate,\r\n    }\r\n  );\r\n\r\n  revalidatePath(\"/admin/loans\");\r\n  revalidatePath(\"/dashboard/loans\");\r\n\r\n  return {\r\n    success: true,\r\n    emiCount: emiSchedule.length,\r\n    emiAmount,\r\n    totalAmount: totalPayable,\r\n    interestAmount: totalInterest,\r\n  };\r\n}\r\n\r\n// Update a specific EMI due date (admin only)\r\nexport async function updateEMIDueDate(emiId: string, newDueDate: Date) {\r\n  await dbConnect();\r\n\r\n  const emi = await EmiPayment.findById(emiId);\r\n  if (!emi) throw new Error(\"EMI not found\");\r\n\r\n  if (emi.status === \"paid\") {\r\n    throw new Error(\"Cannot update due date of paid EMI\");\r\n  }\r\n\r\n  emi.dueDate = newDueDate;\r\n  await emi.save();\r\n\r\n  // Update loan's next EMI date if this is the next pending EMI\r\n  const loan = await Loan.findById(emi.loanId);\r\n  if (loan) {\r\n    const nextPendingEmi = await EmiPayment.findOne({\r\n      loanId: loan._id,\r\n      status: \"pending\",\r\n    }).sort({ emiNumber: 1 });\r\n\r\n    if (nextPendingEmi) {\r\n      loan.nextEmiDate = nextPendingEmi.dueDate;\r\n      await loan.save();\r\n    }\r\n  }\r\n\r\n  revalidatePath(\"/admin/loans\");\r\n  revalidatePath(\"/dashboard/loans\");\r\n\r\n  return { success: true, message: \"Due date updated successfully\" };\r\n}\r\n\r\n// Bulk update EMI due dates for a loan (admin only)\r\nexport async function rescheduleAllEMIs(loanId: string, newStartDate: Date) {\r\n  await dbConnect();\r\n\r\n  const emis = await EmiPayment.find({\r\n    loanId,\r\n    status: { $ne: \"paid\" },\r\n  }).sort({ emiNumber: 1 });\r\n\r\n  if (emis.length === 0) {\r\n    throw new Error(\"No pending EMIs found\");\r\n  }\r\n\r\n  let currentDate = new Date(newStartDate);\r\n\r\n  for (const emi of emis) {\r\n    emi.dueDate = new Date(currentDate);\r\n    await emi.save();\r\n    currentDate.setMonth(currentDate.getMonth() + 1);\r\n  }\r\n\r\n  // Update loan's next EMI date\r\n  const loan = await Loan.findById(loanId);\r\n  if (loan) {\r\n    loan.nextEmiDate = emis[0].dueDate;\r\n    await loan.save();\r\n  }\r\n\r\n  revalidatePath(\"/admin/loans\");\r\n  revalidatePath(\"/dashboard/loans\");\r\n\r\n  return {\r\n    success: true,\r\n    message: `Rescheduled ${emis.length} EMIs`,\r\n    count: emis.length,\r\n  };\r\n}\r\n\r\n// Mark EMI as overdue (can be run as a cron job)\r\nexport async function markOverdueEMIs() {\r\n  await dbConnect();\r\n\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  const result = await EmiPayment.updateMany(\r\n    {\r\n      status: \"pending\",\r\n      dueDate: { $lt: today },\r\n    },\r\n    {\r\n      $set: { status: \"overdue\" },\r\n    }\r\n  );\r\n\r\n  console.log(`✅ Marked ${result.modifiedCount} EMIs as overdue`);\r\n\r\n  revalidatePath(\"/admin/loans\");\r\n  revalidatePath(\"/dashboard/loans\");\r\n\r\n  return {\r\n    success: true,\r\n    count: result.modifiedCount,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}}]
}