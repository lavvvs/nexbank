{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/mongodb.ts"],"sourcesContent":["// lib/mongodb.ts\r\nimport mongoose from \"mongoose\";\r\n\r\nconst MONGO_URI = process.env.DATABASE_URL!;\r\nif (!MONGO_URI) throw new Error(\"Please define DATABASE_URL in your .env\");\r\n\r\n// Cache the connection across hot reloads (Next.js)\r\nlet cached = (global as any).mongoose;\r\n\r\nif (!cached) {\r\n  cached = (global as any).mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function dbConnect() {\r\n  if (cached.conn) return cached.conn;\r\n\r\n  if (!cached.promise) {\r\n    cached.promise = mongoose.connect(MONGO_URI).then((mongoose) => mongoose);\r\n  }\r\n  cached.conn = await cached.promise;\r\n  return cached.conn;\r\n}\r\n\r\nexport default dbConnect;\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;AACjB;;AAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,YAAY;AAC1C,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;AAEhC,oDAAoD;AACpD,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAClE;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IAEnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,WAAa;IAClE;IACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/models.ts"],"sourcesContent":["// lib/models.ts\r\nimport mongoose, { Schema, Document } from \"mongoose\";\r\n\r\nconst { ObjectId } = Schema.Types;\r\n\r\n// =======================\r\n// 1️⃣ Profile\r\n// =======================\r\nexport interface IProfile extends Document {\r\n  clerkId: string; // Changed: Add clerkId as the primary identifier\r\n  email: string;\r\n  fullName?: string;\r\n  phone?: string;\r\n  address?: string;\r\n  kycStatus: string;\r\n  isAdmin: boolean;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst ProfileSchema = new Schema<IProfile>(\r\n  {\r\n    clerkId: { type: String, unique: true, required: true }, // Changed: Use Clerk ID\r\n    email: { type: String, unique: true, required: true },\r\n    fullName: String,\r\n    phone: String,\r\n    address: String,\r\n    kycStatus: { type: String, default: \"pending\" },\r\n    isAdmin: { type: Boolean, default: false },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// =======================\r\n// 2️⃣ Account\r\n// =======================\r\nexport interface IAccount extends Document {\r\n  userId: string; // Changed: String instead of ObjectId\r\n  accountNumber: string;\r\n  accountType: string;\r\n  balance: number;\r\n  currency: string;\r\n  status: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst AccountSchema = new Schema<IAccount>(\r\n  {\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    accountNumber: { type: String, unique: true, required: true },\r\n    accountType: String,\r\n    balance: { type: Number, default: 0 },\r\n    currency: { type: String, default: \"USD\" },\r\n    status: { type: String, default: \"active\" },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// =======================\r\n// 3️⃣ Transaction\r\n// =======================\r\nexport interface ITransaction extends Document {\r\n  userId: string; // Changed: String instead of ObjectId\r\n  accountId: mongoose.Types.ObjectId;\r\n  amount: number;\r\n  type: string;\r\n  status: string;\r\n  description?: string;\r\n  referenceId?: string;\r\n  recipientAccountId?: mongoose.Types.ObjectId;\r\n  recipientUserId?: string; // Changed: String instead of ObjectId\r\n  createdAt: Date;\r\n}\r\n\r\nconst TransactionSchema = new Schema<ITransaction>(\r\n  {\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    accountId: { type: ObjectId, ref: \"Account\", required: true },\r\n    amount: { type: Number, required: true },\r\n    type: { type: String, required: true },\r\n    status: { type: String, default: \"completed\" },\r\n    description: String,\r\n    referenceId: String,\r\n    recipientAccountId: { type: ObjectId, ref: \"Account\" },\r\n    recipientUserId: { type: String }, // Changed: String for Clerk ID\r\n  },\r\n  { timestamps: { createdAt: true, updatedAt: false } }\r\n);\r\n\r\n// =======================\r\n// 4️⃣ Loan\r\n// =======================\r\nexport interface ILoan extends Document {\r\n  userId: string; // Changed: String instead of ObjectId\r\n  loanType: string;\r\n  amount: number;\r\n  interestRate: number;\r\n  tenureMonths: number;\r\n  emiAmount: number;\r\n  totalPayable: number;\r\n  amountPaid: number;\r\n  remainingAmount?: number;\r\n  status: string;\r\n  disbursementAccountId?: mongoose.Types.ObjectId;\r\n  approvedBy?: string; // Changed: String instead of ObjectId\r\n  approvedAt?: Date;\r\n  disbursedAt?: Date;\r\n  nextEmiDate?: Date;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nconst LoanSchema = new Schema<ILoan>(\r\n  {\r\n    userId: { type: String, required: true }, // Changed: String for Clerk ID\r\n    loanType: String,\r\n    amount: Number,\r\n    interestRate: Number,\r\n    tenureMonths: Number,\r\n    emiAmount: Number,\r\n    totalPayable: Number,\r\n    amountPaid: { type: Number, default: 0 },\r\n    remainingAmount: Number,\r\n    status: { type: String, default: \"pending\" },\r\n    disbursementAccountId: { type: ObjectId, ref: \"Account\" },\r\n    approvedBy: { type: String }, // Changed: String for Clerk ID\r\n    approvedAt: Date,\r\n    disbursedAt: Date,\r\n    nextEmiDate: Date,\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\n// =======================\r\n// 5️⃣ EmiPayment\r\n// =======================\r\nexport interface IEmiPayment extends Document {\r\n  loanId: mongoose.Types.ObjectId;\r\n  userId: string; // Changed: String instead of ObjectId\r\n  emiNumber: number;\r\n  amount: number;\r\n  principalAmount: number;\r\n  interestAmount: number;\r\n  dueDate: Date;\r\n  paidDate?: Date;\r\n  status: string;\r\n  stripePaymentId?: string;\r\n  transactionId?: mongoose.Types.ObjectId;\r\n  createdAt: Date;\r\n}\r\n\r\nconst EmiPaymentSchema = new Schema<IEmiPayment>(\r\n  {\r\n    loanId: { type: ObjectId, ref: \"Loan\", required: true },\r\n    userId: { type: String, required: true, index: true }, // Changed: String for Clerk ID\r\n    emiNumber: Number,\r\n    amount: Number,\r\n    principalAmount: Number,\r\n    interestAmount: Number,\r\n    dueDate: Date,\r\n    paidDate: Date,\r\n    status: { type: String, default: \"pending\" },\r\n    stripePaymentId: String,\r\n    transactionId: { type: ObjectId, ref: \"Transaction\" },\r\n  },\r\n  { timestamps: { createdAt: true, updatedAt: false } }\r\n);\r\n\r\n// =======================\r\n// 6️⃣ BankSetting\r\n// =======================\r\nexport interface IBankSetting extends Document {\r\n  settingKey: string;\r\n  settingValue: string;\r\n  description?: string;\r\n  updatedBy?: string; // Changed: String instead of ObjectId\r\n  updatedAt: Date;\r\n}\r\n\r\nconst BankSettingSchema = new Schema<IBankSetting>(\r\n  {\r\n    settingKey: { type: String, unique: true },\r\n    settingValue: String,\r\n    description: String,\r\n    updatedBy: { type: String }, // Changed: String for Clerk ID\r\n  },\r\n  { timestamps: { createdAt: false, updatedAt: true } }\r\n);\r\n\r\n// =======================\r\n// Export all models\r\n// =======================\r\nexport const Profile =\r\n  mongoose.models.Profile || mongoose.model(\"Profile\", ProfileSchema);\r\nexport const Account =\r\n  mongoose.models.Account || mongoose.model(\"Account\", AccountSchema);\r\nexport const Transaction =\r\n  mongoose.models.Transaction ||\r\n  mongoose.model(\"Transaction\", TransactionSchema);\r\nexport const Loan = mongoose.models.Loan || mongoose.model(\"Loan\", LoanSchema);\r\nexport const EmiPayment =\r\n  mongoose.models.EmiPayment || mongoose.model(\"EmiPayment\", EmiPaymentSchema);\r\nexport const BankSetting =\r\n  mongoose.models.BankSetting ||\r\n  mongoose.model(\"BankSetting\", BankSettingSchema);\r\n\r\n// lib/models.ts (add this to your existing models file)\r\n\r\nconst bankSettingsSchema = new mongoose.Schema(\r\n  {\r\n    userId: {\r\n      type: String,\r\n      required: true,\r\n      unique: true,\r\n      index: true,\r\n    },\r\n    bankName: {\r\n      type: String,\r\n      default: \"Your Bank\",\r\n    },\r\n    transactionLimits: {\r\n      daily: {\r\n        type: Number,\r\n        default: 10000,\r\n      },\r\n      perTransaction: {\r\n        type: Number,\r\n        default: 5000,\r\n      },\r\n    },\r\n    interestRates: {\r\n      savings: {\r\n        type: Number,\r\n        default: 3.5,\r\n      },\r\n      checking: {\r\n        type: Number,\r\n        default: 0.5,\r\n      },\r\n    },\r\n    fees: {\r\n      monthlyMaintenance: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      overdraft: {\r\n        type: Number,\r\n        default: 35,\r\n      },\r\n      atmWithdrawal: {\r\n        type: Number,\r\n        default: 2.5,\r\n      },\r\n    },\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport const BankSettings =\r\n  mongoose.models.BankSettings ||\r\n  mongoose.model(\"BankSettings\", bankSettingsSchema);\r\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;;;;;;;;;;;;;;AAChB;;AAEA,MAAM,EAAE,QAAQ,EAAE,GAAG,mHAAM,CAAC,KAAK;AAiBjC,MAAM,gBAAgB,IAAI,mHAAM,CAC9B;IACE,SAAS;QAAE,MAAM;QAAQ,QAAQ;QAAM,UAAU;IAAK;IACtD,OAAO;QAAE,MAAM;QAAQ,QAAQ;QAAM,UAAU;IAAK;IACpD,UAAU;IACV,OAAO;IACP,SAAS;IACT,WAAW;QAAE,MAAM;QAAQ,SAAS;IAAU;IAC9C,SAAS;QAAE,MAAM;QAAS,SAAS;IAAM;AAC3C,GACA;IAAE,YAAY;AAAK;AAiBrB,MAAM,gBAAgB,IAAI,mHAAM,CAC9B;IACE,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,eAAe;QAAE,MAAM;QAAQ,QAAQ;QAAM,UAAU;IAAK;IAC5D,aAAa;IACb,SAAS;QAAE,MAAM;QAAQ,SAAS;IAAE;IACpC,UAAU;QAAE,MAAM;QAAQ,SAAS;IAAM;IACzC,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAS;AAC5C,GACA;IAAE,YAAY;AAAK;AAmBrB,MAAM,oBAAoB,IAAI,mHAAM,CAClC;IACE,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,WAAW;QAAE,MAAM;QAAU,KAAK;QAAW,UAAU;IAAK;IAC5D,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAY;IAC7C,aAAa;IACb,aAAa;IACb,oBAAoB;QAAE,MAAM;QAAU,KAAK;IAAU;IACrD,iBAAiB;QAAE,MAAM;IAAO;AAClC,GACA;IAAE,YAAY;QAAE,WAAW;QAAM,WAAW;IAAM;AAAE;AA0BtD,MAAM,aAAa,IAAI,mHAAM,CAC3B;IACE,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,UAAU;IACV,QAAQ;IACR,cAAc;IACd,cAAc;IACd,WAAW;IACX,cAAc;IACd,YAAY;QAAE,MAAM;QAAQ,SAAS;IAAE;IACvC,iBAAiB;IACjB,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAU;IAC3C,uBAAuB;QAAE,MAAM;QAAU,KAAK;IAAU;IACxD,YAAY;QAAE,MAAM;IAAO;IAC3B,YAAY;IACZ,aAAa;IACb,aAAa;AACf,GACA;IAAE,YAAY;AAAK;AAqBrB,MAAM,mBAAmB,IAAI,mHAAM,CACjC;IACE,QAAQ;QAAE,MAAM;QAAU,KAAK;QAAQ,UAAU;IAAK;IACtD,QAAQ;QAAE,MAAM;QAAQ,UAAU;QAAM,OAAO;IAAK;IACpD,WAAW;IACX,QAAQ;IACR,iBAAiB;IACjB,gBAAgB;IAChB,SAAS;IACT,UAAU;IACV,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAU;IAC3C,iBAAiB;IACjB,eAAe;QAAE,MAAM;QAAU,KAAK;IAAc;AACtD,GACA;IAAE,YAAY;QAAE,WAAW;QAAM,WAAW;IAAM;AAAE;AActD,MAAM,oBAAoB,IAAI,mHAAM,CAClC;IACE,YAAY;QAAE,MAAM;QAAQ,QAAQ;IAAK;IACzC,cAAc;IACd,aAAa;IACb,WAAW;QAAE,MAAM;IAAO;AAC5B,GACA;IAAE,YAAY;QAAE,WAAW;QAAO,WAAW;IAAK;AAAE;AAM/C,MAAM,UACX,oHAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAC,WAAW;AAChD,MAAM,UACX,oHAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAC,WAAW;AAChD,MAAM,cACX,oHAAQ,CAAC,MAAM,CAAC,WAAW,IAC3B,oHAAQ,CAAC,KAAK,CAAC,eAAe;AACzB,MAAM,OAAO,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ;AAC5D,MAAM,aACX,oHAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,oHAAQ,CAAC,KAAK,CAAC,cAAc;AACtD,MAAM,cACX,oHAAQ,CAAC,MAAM,CAAC,WAAW,IAC3B,oHAAQ,CAAC,KAAK,CAAC,eAAe;AAEhC,wDAAwD;AAExD,MAAM,qBAAqB,IAAI,oHAAQ,CAAC,MAAM,CAC5C;IACE,QAAQ;QACN,MAAM;QACN,UAAU;QACV,QAAQ;QACR,OAAO;IACT;IACA,UAAU;QACR,MAAM;QACN,SAAS;IACX;IACA,mBAAmB;QACjB,OAAO;YACL,MAAM;YACN,SAAS;QACX;QACA,gBAAgB;YACd,MAAM;YACN,SAAS;QACX;IACF;IACA,eAAe;QACb,SAAS;YACP,MAAM;YACN,SAAS;QACX;QACA,UAAU;YACR,MAAM;YACN,SAAS;QACX;IACF;IACA,MAAM;QACJ,oBAAoB;YAClB,MAAM;YACN,SAAS;QACX;QACA,WAAW;YACT,MAAM;YACN,SAAS;QACX;QACA,eAAe;YACb,MAAM;YACN,SAAS;QACX;IACF;AACF,GACA;IAAE,YAAY;AAAK;AAGd,MAAM,eACX,oHAAQ,CAAC,MAAM,CAAC,YAAY,IAC5B,oHAAQ,CAAC,KAAK,CAAC,gBAAgB"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/dashboard/sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DashboardSidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call DashboardSidebar() from the server but DashboardSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/sidebar.tsx <module evaluation>\",\n    \"DashboardSidebar\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,kEACA","ignoreList":[0]}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/dashboard/sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DashboardSidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call DashboardSidebar() from the server but DashboardSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/sidebar.tsx\",\n    \"DashboardSidebar\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,8CACA","ignoreList":[0]}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/dashboard/header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DashboardHeader = registerClientReference(\n    function() { throw new Error(\"Attempted to call DashboardHeader() from the server but DashboardHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/header.tsx <module evaluation>\",\n    \"DashboardHeader\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,iEACA","ignoreList":[0]}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/dashboard/header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DashboardHeader = registerClientReference(\n    function() { throw new Error(\"Attempted to call DashboardHeader() from the server but DashboardHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard/header.tsx\",\n    \"DashboardHeader\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,6CACA","ignoreList":[0]}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/utils/serializeProfile.ts"],"sourcesContent":["// lib/serializeProfile.ts\r\nimport type { SafeProfile } from \"@/types/safe-profile\";\r\n\r\nexport function serializeProfile(profile: any): SafeProfile {\r\n  return {\r\n    id: profile._id?.toString() || \"\",\r\n    clerkId: String(profile.clerkId || \"\"),\r\n    email: String(profile.email || \"\"),\r\n    fullName: String(profile.fullName || \"\"),\r\n    phone: String(profile.phone || \"\"),\r\n    kycStatus: (profile.kycStatus as SafeProfile[\"kycStatus\"]) || \"pending\",\r\n    isAdmin: !!profile.isAdmin,\r\n    createdAt:\r\n      (profile.createdAt instanceof Date\r\n        ? profile.createdAt.toISOString()\r\n        : profile.createdAt\r\n        ? new Date(profile.createdAt).toISOString()\r\n        : \"\") || \"\",\r\n    updatedAt:\r\n      (profile.updatedAt instanceof Date\r\n        ? profile.updatedAt.toISOString()\r\n        : profile.updatedAt\r\n        ? new Date(profile.updatedAt).toISOString()\r\n        : \"\") || \"\",\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAGnB,SAAS,iBAAiB,OAAY;IAC3C,OAAO;QACL,IAAI,QAAQ,GAAG,EAAE,cAAc;QAC/B,SAAS,OAAO,QAAQ,OAAO,IAAI;QACnC,OAAO,OAAO,QAAQ,KAAK,IAAI;QAC/B,UAAU,OAAO,QAAQ,QAAQ,IAAI;QACrC,OAAO,OAAO,QAAQ,KAAK,IAAI;QAC/B,WAAW,AAAC,QAAQ,SAAS,IAAiC;QAC9D,SAAS,CAAC,CAAC,QAAQ,OAAO;QAC1B,WACE,CAAC,QAAQ,SAAS,YAAY,OAC1B,QAAQ,SAAS,CAAC,WAAW,KAC7B,QAAQ,SAAS,GACjB,IAAI,KAAK,QAAQ,SAAS,EAAE,WAAW,KACvC,EAAE,KAAK;QACb,WACE,CAAC,QAAQ,SAAS,YAAY,OAC1B,QAAQ,SAAS,CAAC,WAAW,KAC7B,QAAQ,SAAS,GACjB,IAAI,KAAK,QAAQ,SAAS,EAAE,WAAW,KACvC,EAAE,KAAK;IACf;AACF"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/app/%28dashboard%29/layout.tsx"],"sourcesContent":["// app/(dashboard)/layout.tsx\nimport type React from \"react\";\nimport { redirect } from \"next/navigation\";\nimport { auth, currentUser } from \"@clerk/nextjs/server\";\nimport dbConnect from \"@/lib/mongodb\";\nimport { Profile } from \"@/lib/models\";\nimport { DashboardSidebar } from \"@/components/dashboard/sidebar\";\nimport { DashboardHeader } from \"@/components/dashboard/header\";\nimport { serializeProfile } from \"@/lib/utils/serializeProfile\";\nimport type { SafeProfile } from \"@/types/safe-profile\";\n\nexport default async function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const session = await auth();\n  const userId = session.userId;\n\n  if (!userId) redirect(\"/auth/login\");\n\n  await dbConnect();\n\n  let profile = await Profile.findOne({ clerkId: userId }).lean();\n\n  if (!profile) {\n    const user = await currentUser();\n    if (!user) redirect(\"/auth/login\");\n\n    const newProfile = await Profile.create({\n      clerkId: userId,\n      email: user.emailAddresses[0]?.emailAddress || \"\",\n      fullName: user.fullName || \"\",\n      phone: user.phoneNumbers[0]?.phoneNumber || \"\",\n      kycStatus: \"pending\",\n      isAdmin: false,\n    });\n\n    profile = newProfile.toObject();\n  }\n\n  const safeProfile: SafeProfile = serializeProfile(profile);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Sidebar - Fixed position */}\n      <DashboardSidebar profile={safeProfile} />\n\n      {/* Main content area - Uses margin instead of padding */}\n      <div className=\"min-h-screen lg:ml-72\">\n        <DashboardHeader profile={safeProfile} />\n        <main className=\"p-6\">{children}</main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;AAE7B;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAGe,eAAe,gBAAgB,EAC5C,QAAQ,EAGT;IACC,MAAM,UAAU,MAAM,IAAA,2LAAI;IAC1B,MAAM,SAAS,QAAQ,MAAM;IAE7B,IAAI,CAAC,QAAQ,IAAA,iMAAQ,EAAC;IAEtB,MAAM,IAAA,yHAAS;IAEf,IAAI,UAAU,MAAM,wHAAO,CAAC,OAAO,CAAC;QAAE,SAAS;IAAO,GAAG,IAAI;IAE7D,IAAI,CAAC,SAAS;QACZ,MAAM,OAAO,MAAM,IAAA,yMAAW;QAC9B,IAAI,CAAC,MAAM,IAAA,iMAAQ,EAAC;QAEpB,MAAM,aAAa,MAAM,wHAAO,CAAC,MAAM,CAAC;YACtC,SAAS;YACT,OAAO,KAAK,cAAc,CAAC,EAAE,EAAE,gBAAgB;YAC/C,UAAU,KAAK,QAAQ,IAAI;YAC3B,OAAO,KAAK,YAAY,CAAC,EAAE,EAAE,eAAe;YAC5C,WAAW;YACX,SAAS;QACX;QAEA,UAAU,WAAW,QAAQ;IAC/B;IAEA,MAAM,cAA2B,IAAA,oJAAgB,EAAC;IAElD,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC,uJAAgB;gBAAC,SAAS;;;;;;0BAG3B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,qJAAe;wBAAC,SAAS;;;;;;kCAC1B,8OAAC;wBAAK,WAAU;kCAAO;;;;;;;;;;;;;;;;;;AAI/B"}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/node_modules/%40clerk/nextjs/src/server/middleware-storage.ts"],"sourcesContent":["import { AsyncLocalStorage } from 'node:async_hooks';\n\nimport type { AuthenticateRequestOptions } from '@clerk/backend/internal';\n\nexport const clerkMiddlewareRequestDataStore = new Map<'requestData', AuthenticateRequestOptions>();\nexport const clerkMiddlewareRequestDataStorage = new AsyncLocalStorage<typeof clerkMiddlewareRequestDataStore>();\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,yBAAyB;;;AAI3B,MAAM,kCAAkC,aAAA,GAAA,IAAI,IAA+C;AAC3F,MAAM,oCAAoC,IAAI,oJAAA,CAA0D"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/node_modules/%40clerk/nextjs/src/server/clerkClient.ts"],"sourcesContent":["import { constants } from '@clerk/backend/internal';\n\nimport { buildRequestLike, isPrerenderingBailout } from '../app-router/server/utils';\nimport { createClerkClientWithOptions } from './createClerkClient';\nimport { getHeader } from './headers-utils';\nimport { clerkMiddlewareRequestDataStorage } from './middleware-storage';\nimport { decryptClerkRequestData } from './utils';\n\n/**\n * Constructs a BAPI client that accesses request data within the runtime.\n * Necessary if middleware dynamic keys are used.\n */\nconst clerkClient = async () => {\n  let requestData;\n\n  try {\n    const request = await buildRequestLike();\n    const encryptedRequestData = getHeader(request, constants.Headers.ClerkRequestData);\n    requestData = decryptClerkRequestData(encryptedRequestData);\n  } catch (err) {\n    if (err && isPrerenderingBailout(err)) {\n      throw err;\n    }\n  }\n\n  // Fallbacks between options from middleware runtime and `NextRequest` from application server\n  const options = clerkMiddlewareRequestDataStorage.getStore()?.get('requestData') ?? requestData;\n  if (options?.secretKey || options?.publishableKey) {\n    return createClerkClientWithOptions(options);\n  }\n\n  return createClerkClientWithOptions({});\n};\n\nexport { clerkClient };\n"],"names":[],"mappings":";;;;;AAAA,SAAS,iBAAiB;AAE1B,SAAS,kBAAkB,6BAA6B;AACxD,SAAS,oCAAoC;AAC7C,SAAS,iBAAiB;AAC1B,SAAS,yCAAyC;AAClD,SAAS,+BAA+B;;;;;;;;AAMxC,MAAM,cAAc,YAAY;IAZhC,IAAA,IAAA;IAaE,IAAI;IAEJ,IAAI;QACF,MAAM,UAAU,UAAM,wMAAA,CAAiB;QACvC,MAAM,2BAAuB,2LAAA,EAAU,SAAS,6LAAA,CAAU,OAAA,CAAQ,gBAAgB;QAClF,kBAAc,8LAAA,EAAwB,oBAAoB;IAC5D,EAAA,OAAS,KAAK;QACZ,IAAI,WAAO,6MAAA,EAAsB,GAAG,GAAG;YACrC,MAAM;QACR;IACF;IAGA,MAAM,UAAA,CAAU,KAAA,CAAA,KAAA,wNAAA,CAAkC,QAAA,CAAS,CAAA,KAA3C,OAAA,KAAA,IAAA,GAA8C,GAAA,CAAI,cAAA,KAAlD,OAAA,KAAoE;IACpF,IAAA,CAAI,WAAA,OAAA,KAAA,IAAA,QAAS,SAAA,KAAA,CAAa,WAAA,OAAA,KAAA,IAAA,QAAS,cAAA,GAAgB;QACjD,WAAO,+MAAA,EAA6B,OAAO;IAC7C;IAEA,WAAO,+MAAA,EAA6B,CAAC,CAAC;AACxC"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/node_modules/%40clerk/nextjs/src/app-router/server/currentUser.ts"],"sourcesContent":["import type { User } from '@clerk/backend';\nimport type { PendingSessionOptions } from '@clerk/types';\n\nimport { clerkClient } from '../../server/clerkClient';\nimport { auth } from './auth';\n\ntype CurrentUserOptions = PendingSessionOptions;\n\n/**\n * The `currentUser` helper returns the [Backend User](https://clerk.com/docs/reference/backend/types/backend-user) object of the currently active user. It can be used in Server Components, Route Handlers, and Server Actions.\n *\n * Under the hood, this helper:\n * - calls `fetch()`, so it is automatically deduped per request.\n * - uses the [`GET /v1/users/{user_id}`](https://clerk.com/docs/reference/backend-api/tag/Users#operation/GetUser) endpoint.\n * - counts towards the [Backend API request rate limit](https://clerk.com/docs/guides/how-clerk-works/system-limits).\n *\n * @example\n * ```tsx {{ filename: 'app/page.tsx' }}\n * import { currentUser } from '@clerk/nextjs/server'\n *\n * export default async function Page() {\n *  const user = await currentUser()\n *\n *  if (!user) return <div>Not signed in</div>\n *\n *  return <div>Hello {user?.firstName}</div>\n * }\n * ```\n */\nexport async function currentUser(opts?: CurrentUserOptions): Promise<User | null> {\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  require('server-only');\n\n  const { userId } = await auth({ treatPendingAsSignedOut: opts?.treatPendingAsSignedOut });\n  if (!userId) {\n    return null;\n  }\n\n  return (await clerkClient()).users.getUser(userId);\n}\n"],"names":[],"mappings":";;;;AAGA,SAAS,mBAAmB;AAC5B,SAAS,YAAY;;;;AAyBrB,eAAsB,YAAY,IAAA,EAAiD;;IAIjF,MAAM,EAAE,MAAA,CAAO,CAAA,GAAI,UAAM,2LAAA,EAAK;QAAE,yBAAyB,QAAA,OAAA,KAAA,IAAA,KAAM,uBAAA;IAAwB,CAAC;IACxF,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,OAAA,CAAQ,UAAM,wLAAA,CAAY,EAAA,EAAG,KAAA,CAAM,OAAA,CAAQ,MAAM;AACnD"}}]
}