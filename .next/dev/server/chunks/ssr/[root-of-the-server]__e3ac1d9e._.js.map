{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/ui/button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Button = registerClientReference(\n    function() { throw new Error(\"Attempted to call Button() from the server but Button is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx <module evaluation>\",\n    \"Button\",\n);\nexport const buttonVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call buttonVariants() from the server but buttonVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx <module evaluation>\",\n    \"buttonVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,0DACA;AAEG,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,0DACA","ignoreList":[0]}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/ui/button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Button = registerClientReference(\n    function() { throw new Error(\"Attempted to call Button() from the server but Button is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx\",\n    \"Button\",\n);\nexport const buttonVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call buttonVariants() from the server but buttonVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/button.tsx\",\n    \"buttonVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,sCACA;AAEG,MAAM,iBAAiB,IAAA,wQAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,sCACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/lib/stripe.ts"],"sourcesContent":["import \"server-only\"\nimport Stripe from \"stripe\"\n\nexport const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!)\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,SAAS,IAAI,iKAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/app/actions/stripe.ts"],"sourcesContent":["// app/actions/stripe.ts\n\"use server\";\n\nimport { stripe } from \"@/lib/stripe\";\nimport { auth } from \"@clerk/nextjs/server\";\nimport { Account } from \"@/lib/models\";\nimport dbConnect from \"@/lib/mongodb\";\n\nconst DEPOSIT_OPTIONS = [\n  { id: \"deposit-100\", name: \"Deposit $100\", amount: 10000 },\n  { id: \"deposit-500\", name: \"Deposit $500\", amount: 50000 },\n  { id: \"deposit-1000\", name: \"Deposit $1,000\", amount: 100000 },\n  { id: \"deposit-5000\", name: \"Deposit $5,000\", amount: 500000 },\n];\n\nexport async function startDepositCheckout(\n  depositId: string,\n  accountId: string\n) {\n  const session = await auth();\n  const userId = session.userId;\n  if (!userId) throw new Error(\"You must be logged in\");\n\n  const deposit = DEPOSIT_OPTIONS.find((d) => d.id === depositId);\n  if (!deposit) throw new Error(`Deposit option \"${depositId}\" not found`);\n\n  await dbConnect();\n  const account = await Account.findOne({ _id: accountId, userId }).lean();\n  if (!account) throw new Error(\"Account not found\");\n\n  console.log(\"Creating checkout session:\", {\n    depositId,\n    accountId,\n    amount: deposit.amount / 100,\n    userId,\n  });\n\n  const sessionObj = await stripe.checkout.sessions.create({\n    ui_mode: \"embedded\",\n    // FIX 1: Add return_url instead of redirect_on_completion\n    return_url: `${process.env.NEXT_PUBLIC_BASE_URL}/dashboard/deposit/return?session_id={CHECKOUT_SESSION_ID}`,\n    line_items: [\n      {\n        price_data: {\n          currency: \"usd\",\n          product_data: {\n            name: deposit.name,\n            description: `Add funds to your ${account.accountType} account (${account.accountNumber})`,\n          },\n          unit_amount: deposit.amount,\n        },\n        quantity: 1,\n      },\n    ],\n    mode: \"payment\",\n    metadata: {\n      userId,\n      accountId,\n      depositId,\n      amount: (deposit.amount / 100).toString(),\n      type: \"deposit\",\n    },\n  });\n\n  console.log(\"‚úÖ Checkout session created:\", sessionObj.id);\n  return sessionObj.client_secret;\n}\n\nexport async function startCustomDepositCheckout(\n  amount: number,\n  accountId: string\n) {\n  if (amount < 10 || amount > 100000)\n    throw new Error(\"Amount must be between $10 and $100,000\");\n\n  const session = await auth();\n  const userId = session.userId;\n  if (!userId) throw new Error(\"You must be logged in\");\n\n  await dbConnect();\n  const account = await Account.findOne({ _id: accountId, userId }).lean();\n  if (!account) throw new Error(\"Account not found\");\n\n  console.log(\"Creating custom checkout session:\", {\n    amount,\n    accountId,\n    userId,\n  });\n\n  const sessionObj = await stripe.checkout.sessions.create({\n    ui_mode: \"embedded\",\n    // FIX 1: Add return_url instead of redirect_on_completion\n    return_url: `${process.env.NEXT_PUBLIC_BASE_URL}/dashboard/deposit/return?session_id={CHECKOUT_SESSION_ID}`,\n    line_items: [\n      {\n        price_data: {\n          currency: \"usd\",\n          product_data: {\n            name: `Deposit $${amount.toFixed(2)}`,\n            description: `Add funds to your ${account.accountType} account (${account.accountNumber})`,\n          },\n          unit_amount: Math.round(amount * 100),\n        },\n        quantity: 1,\n      },\n    ],\n    mode: \"payment\",\n    metadata: {\n      userId,\n      accountId,\n      depositId: \"custom\",\n      amount: amount.toString(),\n      type: \"deposit\",\n    },\n  });\n\n  console.log(\"‚úÖ Custom checkout session created:\", sessionObj.id);\n  return sessionObj.client_secret;\n}\n\n// Helper function to retrieve session status\nexport async function getCheckoutSessionStatus(sessionId: string) {\n  try {\n    const session = await stripe.checkout.sessions.retrieve(sessionId);\n\n    console.log(\"Session status:\", {\n      id: session.id,\n      status: session.status,\n      payment_status: session.payment_status,\n    });\n\n    return {\n      status: session.status,\n      payment_status: session.payment_status,\n      customer_email: session.customer_details?.email,\n      amount_total: session.amount_total,\n    };\n  } catch (error) {\n    console.error(\"‚ùå Error retrieving session:\", error);\n    return null;\n  }\n}\n// Add this import at the top if not already there\nimport type Stripe from \"stripe\";\n\n// EMI Payment Checkout\nexport async function startEMIPaymentCheckout(emiId: string, loanId: string) {\n  const session = await auth();\n  const userId = session.userId;\n  if (!userId) throw new Error(\"You must be logged in\");\n\n  await dbConnect();\n\n  const { Loan, EmiPayment } = await import(\"@/lib/models\");\n\n  const loan = await Loan.findOne({ _id: loanId, userId }).lean();\n  if (!loan) throw new Error(\"Loan not found\");\n\n  const emi = await EmiPayment.findOne({ _id: emiId, loanId }).lean();\n  if (!emi) throw new Error(\"EMI not found\");\n\n  if (emi.status === \"paid\") {\n    throw new Error(\"This EMI has already been paid\");\n  }\n\n  const sessionObj = await stripe.checkout.sessions.create({\n    ui_mode: \"embedded\",\n    return_url: `${process.env.NEXT_PUBLIC_BASE_URL}/dashboard/loans/emi-return?session_id={CHECKOUT_SESSION_ID}`,\n    line_items: [\n      {\n        price_data: {\n          currency: \"usd\",\n          product_data: {\n            name: `EMI Payment #${emi.emiNumber}`,\n            description: `${loan.loanType} Loan - Due ${new Date(\n              emi.dueDate\n            ).toLocaleDateString()}`,\n          },\n          unit_amount: Math.round(emi.amount * 100),\n        },\n        quantity: 1,\n      },\n    ],\n    mode: \"payment\",\n    metadata: {\n      userId: userId,\n      loanId: loanId.toString(),\n      emiId: emiId.toString(),\n      emiNumber: emi.emiNumber.toString(),\n      amount: emi.amount.toString(),\n      type: \"emi_payment\",\n    },\n  });\n\n  return sessionObj.client_secret;\n}\n\n// Handle EMI Payment Success\nexport async function handleEMIPaymentSuccess(sessionId: string) {\n  try {\n    const session = await stripe.checkout.sessions.retrieve(sessionId);\n\n    if (session.payment_status !== \"paid\") {\n      return { success: false, message: \"Payment not completed\" };\n    }\n\n    const metadata = session.metadata || {};\n    const userId = metadata.userId;\n    const loanId = metadata.loanId;\n    const emiId = metadata.emiId;\n    const amount = metadata.amount;\n\n    if (!userId || !loanId || !emiId || !amount) {\n      throw new Error(\"Missing required metadata\");\n    }\n\n    await dbConnect();\n    const { Loan, EmiPayment, Transaction, Account } = await import(\n      \"@/lib/models\"\n    );\n\n    const emi = await EmiPayment.findByIdAndUpdate(\n      emiId,\n      {\n        status: \"paid\",\n        paidDate: new Date(),\n        paidAmount: parseFloat(amount),\n      },\n      { new: true }\n    );\n\n    if (!emi) throw new Error(\"EMI not found\");\n\n    const loan = await Loan.findById(loanId);\n    if (!loan) throw new Error(\"Loan not found\");\n\n    loan.amountPaid = (loan.amountPaid || 0) + parseFloat(amount);\n\n    const totalPaid = loan.amountPaid;\n    const totalAmount = loan.amount + (loan.interestAmount || 0);\n\n    if (totalPaid >= totalAmount) {\n      loan.status = \"closed\";\n    }\n\n    await loan.save();\n\n    const transaction = await Transaction.create({\n      userId,\n      accountId: loan.disbursementAccountId,\n      type: \"emi_payment\",\n      amount: -parseFloat(amount),\n      status: \"completed\",\n      description: `EMI #${emi.emiNumber} payment for ${loan.loanType} loan`,\n      reference: sessionId,\n    });\n\n    await Account.findByIdAndUpdate(loan.disbursementAccountId, {\n      $inc: { balance: -parseFloat(amount) },\n    });\n\n    return {\n      success: true,\n      message: \"EMI payment successful\",\n      emiNumber: emi.emiNumber,\n      amount: parseFloat(amount),\n    };\n  } catch (error) {\n    console.error(\"‚ùå Error processing EMI payment:\", error);\n    return {\n      success: false,\n      message:\n        error instanceof Error ? error.message : \"Payment processing failed\",\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 495, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lavan/Downloads/banking-web-application/app/%28dashboard%29/dashboard/deposit/return/page.tsx"],"sourcesContent":["// app/dashboard/deposit/return/page.tsx\r\nimport { redirect } from \"next/navigation\";\r\nimport { CheckCircle2, XCircle, Loader2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport Link from \"next/link\";\r\nimport { getCheckoutSessionStatus } from \"@/app/actions/stripe\";\r\nimport connectDB from \"@/lib/mongodb\";\r\nimport { Account, Transaction } from \"@/lib/models\";\r\nimport mongoose from \"mongoose\";\r\n\r\nasync function confirmAndUpdateBalance(sessionId: string) {\r\n  \"use server\";\r\n\r\n  console.log(\"üîÑ Manual balance update starting for session:\", sessionId);\r\n\r\n  try {\r\n    const { stripe } = await import(\"@/lib/stripe\");\r\n    const session = await stripe.checkout.sessions.retrieve(sessionId);\r\n\r\n    console.log(\"üìã Session retrieved:\", {\r\n      id: session.id,\r\n      payment_status: session.payment_status,\r\n      metadata: session.metadata,\r\n      amount_total: session.amount_total,\r\n    });\r\n\r\n    if (session.payment_status !== \"paid\") {\r\n      console.log(\"‚ö†Ô∏è Payment not completed, skipping balance update\");\r\n      return { success: false, error: \"Payment not completed\" };\r\n    }\r\n\r\n    const accountId = session.metadata?.accountId;\r\n    const userId = session.metadata?.userId;\r\n    const amount = session.amount_total ? session.amount_total / 100 : 0;\r\n\r\n    console.log(\"üí∞ Payment details:\", { accountId, userId, amount });\r\n\r\n    if (!accountId) {\r\n      console.error(\"‚ùå No accountId in metadata\");\r\n      return { success: false, error: \"Missing account ID\" };\r\n    }\r\n\r\n    if (!mongoose.Types.ObjectId.isValid(accountId)) {\r\n      console.error(\"‚ùå Invalid accountId format:\", accountId);\r\n      return { success: false, error: \"Invalid account ID\" };\r\n    }\r\n\r\n    if (amount <= 0) {\r\n      console.error(\"‚ùå Invalid amount:\", amount);\r\n      return { success: false, error: \"Invalid amount\" };\r\n    }\r\n\r\n    await connectDB();\r\n    console.log(\"‚úÖ Database connected\");\r\n\r\n    // Check if transaction already exists (prevent double deposits)\r\n    const existingTx = await Transaction.findOne({ referenceId: sessionId });\r\n    if (existingTx) {\r\n      console.log(\"‚ö†Ô∏è Transaction already processed, skipping\");\r\n      return {\r\n        success: true,\r\n        alreadyProcessed: true,\r\n        message: \"Deposit already processed\",\r\n      };\r\n    }\r\n\r\n    // Find account first\r\n    console.log(\"üîç Finding account:\", accountId);\r\n    const accountBefore = await Account.findById(accountId);\r\n\r\n    if (!accountBefore) {\r\n      console.error(\"‚ùå Account not found\");\r\n      return { success: false, error: \"Account not found\" };\r\n    }\r\n\r\n    console.log(\"üì¶ Account found:\", {\r\n      id: accountBefore._id.toString(),\r\n      currentBalance: accountBefore.balance,\r\n      userId: accountBefore.userId,\r\n    });\r\n\r\n    // Update balance\r\n    console.log(\"üíµ Updating balance by:\", amount);\r\n    const updatedAccount = await Account.findByIdAndUpdate(\r\n      accountId,\r\n      { $inc: { balance: amount } },\r\n      { new: true }\r\n    );\r\n\r\n    if (!updatedAccount) {\r\n      console.error(\"‚ùå Account update failed\");\r\n      return { success: false, error: \"Failed to update balance\" };\r\n    }\r\n\r\n    console.log(\"‚úÖ Balance updated:\", {\r\n      previousBalance: accountBefore.balance,\r\n      amountAdded: amount,\r\n      newBalance: updatedAccount.balance,\r\n    });\r\n\r\n    // Create transaction record\r\n    const transaction = await Transaction.create({\r\n      userId: userId || updatedAccount.userId,\r\n      accountId: updatedAccount._id,\r\n      amount,\r\n      type: \"deposit\",\r\n      status: \"completed\",\r\n      referenceId: sessionId,\r\n      description: `Stripe deposit - ${new Date().toLocaleDateString()}`,\r\n    });\r\n\r\n    console.log(\"‚úÖ Transaction record created:\", transaction._id.toString());\r\n\r\n    // Verify by fetching again\r\n    const verifyAccount = await Account.findById(accountId);\r\n    console.log(\"üîç Verification:\", {\r\n      updatedBalance: updatedAccount.balance,\r\n      verifiedBalance: verifyAccount?.balance,\r\n      match: updatedAccount.balance === verifyAccount?.balance,\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      newBalance: updatedAccount.balance,\r\n      transactionId: transaction._id.toString(),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"‚ùå Balance update error:\", error);\r\n    console.error(\"Error details:\", {\r\n      name: error instanceof Error ? error.name : \"Unknown\",\r\n      message: error instanceof Error ? error.message : \"Unknown\",\r\n      stack: error instanceof Error ? error.stack : undefined,\r\n    });\r\n\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    };\r\n  }\r\n}\r\n\r\nexport default async function DepositReturnPage({\r\n  searchParams,\r\n}: {\r\n  searchParams: Promise<{ session_id?: string }>;\r\n}) {\r\n  const params = await searchParams;\r\n  const sessionId = params.session_id;\r\n\r\n  if (!sessionId) {\r\n    redirect(\"/dashboard/deposit\");\r\n  }\r\n\r\n  // Retrieve session status from Stripe\r\n  const sessionStatus = await getCheckoutSessionStatus(sessionId);\r\n\r\n  if (!sessionStatus) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n        <Card className=\"max-w-md w-full\">\r\n          <CardContent className=\"pt-6 text-center space-y-4\">\r\n            <XCircle className=\"h-16 w-16 text-red-500 mx-auto\" />\r\n            <h1 className=\"text-2xl font-bold\">Error</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Unable to verify payment status. Please contact support if you\r\n              were charged.\r\n            </p>\r\n            <div className=\"flex gap-2 justify-center\">\r\n              <Button asChild variant=\"outline\">\r\n                <Link href=\"/dashboard/deposit\">Try Again</Link>\r\n              </Button>\r\n              <Button asChild>\r\n                <Link href=\"/dashboard\">Go to Dashboard</Link>\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ‚ú® NEW: Manually update balance if payment is successful\r\n  let balanceUpdateResult = null;\r\n  if (sessionStatus.payment_status === \"paid\") {\r\n    balanceUpdateResult = await confirmAndUpdateBalance(sessionId);\r\n    console.log(\"Balance update result:\", balanceUpdateResult);\r\n  }\r\n\r\n  const isSuccess = sessionStatus.payment_status === \"paid\";\r\n  const isPending =\r\n    sessionStatus.payment_status === \"unpaid\" ||\r\n    sessionStatus.status === \"open\";\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-[60vh] p-4\">\r\n      <Card className=\"max-w-md w-full\">\r\n        <CardContent className=\"pt-6 text-center space-y-4\">\r\n          {isSuccess ? (\r\n            <>\r\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-green-100 mx-auto\">\r\n                <CheckCircle2 className=\"h-10 w-10 text-green-600\" />\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">\r\n                Deposit Successful!\r\n              </h1>\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-muted-foreground\">\r\n                  Your account balance has been updated.\r\n                </p>\r\n                {sessionStatus.amount_total && (\r\n                  <p className=\"text-lg font-semibold text-foreground\">\r\n                    Amount: ${(sessionStatus.amount_total / 100).toFixed(2)}\r\n                  </p>\r\n                )}\r\n                {balanceUpdateResult?.alreadyProcessed && (\r\n                  <p className=\"text-sm text-amber-600\">\r\n                    (Already processed by webhook)\r\n                  </p>\r\n                )}\r\n                {sessionStatus.customer_email && (\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    A confirmation email has been sent to{\" \"}\r\n                    <span className=\"font-medium\">\r\n                      {sessionStatus.customer_email}\r\n                    </span>\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div className=\"pt-4 space-y-2\">\r\n                <Button asChild className=\"w-full\">\r\n                  <Link href=\"/dashboard\">View Dashboard</Link>\r\n                </Button>\r\n                <Button asChild variant=\"outline\" className=\"w-full\">\r\n                  <Link href=\"/dashboard/deposit\">Make Another Deposit</Link>\r\n                </Button>\r\n              </div>\r\n            </>\r\n          ) : isPending ? (\r\n            <>\r\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-orange-100 mx-auto\">\r\n                <Loader2 className=\"h-10 w-10 text-orange-600 animate-spin\" />\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">\r\n                Payment Processing\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Your payment is being processed. This usually takes a few\r\n                moments.\r\n                <br />\r\n                <span className=\"text-sm\">Status: {sessionStatus.status}</span>\r\n              </p>\r\n              <div className=\"pt-4 space-y-2\">\r\n                <Button asChild className=\"w-full\">\r\n                  <Link href=\"/dashboard\">Go to Dashboard</Link>\r\n                </Button>\r\n                <Button\r\n                  asChild\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  onClick={() => window.location.reload()}\r\n                >\r\n                  <a href=\"#\">Refresh Status</a>\r\n                </Button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-red-100 mx-auto\">\r\n                <XCircle className=\"h-10 w-10 text-red-600\" />\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">\r\n                Payment Failed\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Your payment could not be processed. Please try again.\r\n                <br />\r\n                <span className=\"text-sm\">\r\n                  Status: {sessionStatus.payment_status}\r\n                </span>\r\n              </p>\r\n              <div className=\"pt-4 space-y-2\">\r\n                <Button asChild className=\"w-full\">\r\n                  <Link href=\"/dashboard/deposit\">Try Again</Link>\r\n                </Button>\r\n                <Button asChild variant=\"outline\" className=\"w-full\">\r\n                  <Link href=\"/dashboard\">Go to Dashboard</Link>\r\n                </Button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}