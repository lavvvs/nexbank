module.exports=[16477,a=>{"use strict";a.i(48917);var b=a.i(90442),c=a.i(24202),d=a.i(75582),e=a.i(63365);let f=new(a.i(78500)).AsyncLocalStorage;var g=a.i(54772);let h=async()=>{var a,h;let i;try{let a=await (0,c.buildRequestLike)(),d=(0,e.getHeader)(a,b.constants.Headers.ClerkRequestData);i=(0,g.decryptClerkRequestData)(d)}catch(a){if(a&&(0,c.isPrerenderingBailout)(a))throw a}let j=null!=(h=null==(a=f.getStore())?void 0:a.get("requestData"))?h:i;return(null==j?void 0:j.secretKey)||(null==j?void 0:j.publishableKey)?(0,d.createClerkClientWithOptions)(j):(0,d.createClerkClientWithOptions)({})};a.s(["clerkClient",()=>h],16477)},26046,(a,b,c)=>{b.exports=a.x("mongoose",()=>require("mongoose"))},13761,a=>{"use strict";var b=a.i(26046);let{ObjectId:c}=b.Schema.Types,d=new b.Schema({clerkId:{type:String,unique:!0,required:!0},email:{type:String,unique:!0,required:!0},fullName:String,phone:String,address:String,kycStatus:{type:String,default:"pending"},isAdmin:{type:Boolean,default:!1}},{timestamps:!0}),e=new b.Schema({userId:{type:String,required:!0},accountNumber:{type:String,unique:!0,required:!0},accountType:String,balance:{type:Number,default:0},currency:{type:String,default:"USD"},status:{type:String,default:"active"}},{timestamps:!0}),f=new b.Schema({userId:{type:String,required:!0},accountId:{type:c,ref:"Account",required:!0},amount:{type:Number,required:!0},type:{type:String,required:!0},status:{type:String,default:"completed"},description:String,referenceId:String,recipientAccountId:{type:c,ref:"Account"},recipientUserId:{type:String}},{timestamps:{createdAt:!0,updatedAt:!1}}),g=new b.Schema({userId:{type:String,required:!0},loanType:String,amount:Number,interestRate:Number,tenureMonths:Number,emiAmount:Number,totalPayable:Number,amountPaid:{type:Number,default:0},remainingAmount:Number,status:{type:String,default:"pending"},disbursementAccountId:{type:c,ref:"Account"},approvedBy:{type:String},approvedAt:Date,disbursedAt:Date,nextEmiDate:Date},{timestamps:!0}),h=new b.Schema({loanId:{type:c,ref:"Loan",required:!0},userId:{type:String,required:!0,index:!0},emiNumber:Number,amount:Number,principalAmount:Number,interestAmount:Number,dueDate:Date,paidDate:Date,status:{type:String,default:"pending"},stripePaymentId:String,transactionId:{type:c,ref:"Transaction"}},{timestamps:{createdAt:!0,updatedAt:!1}}),i=new b.Schema({settingKey:{type:String,unique:!0},settingValue:String,description:String,updatedBy:{type:String}},{timestamps:{createdAt:!1,updatedAt:!0}}),j=b.default.models.Profile||b.default.model("Profile",d),k=b.default.models.Account||b.default.model("Account",e),l=b.default.models.Transaction||b.default.model("Transaction",f),m=b.default.models.Loan||b.default.model("Loan",g),n=b.default.models.EmiPayment||b.default.model("EmiPayment",h),o=b.default.models.BankSetting||b.default.model("BankSetting",i),p=new b.default.Schema({userId:{type:String,required:!0,unique:!0,index:!0},bankName:{type:String,default:"Your Bank"},transactionLimits:{daily:{type:Number,default:1e4},perTransaction:{type:Number,default:5e3}},interestRates:{savings:{type:Number,default:3.5},checking:{type:Number,default:.5}},fees:{monthlyMaintenance:{type:Number,default:0},overdraft:{type:Number,default:35},atmWithdrawal:{type:Number,default:2.5}}},{timestamps:!0}),q=b.default.models.BankSettings||b.default.model("BankSettings",p);a.s(["Account",0,k,"BankSetting",0,o,"BankSettings",0,q,"EmiPayment",0,n,"Loan",0,m,"Profile",0,j,"Transaction",0,l])},22017,a=>{"use strict";var b=a.i(26046);let c=process.env.DATABASE_URL;if(!c)throw Error("Please define DATABASE_URL in your .env");let d=a.g.mongoose;async function e(){return d.conn||(d.promise||(d.promise=b.default.connect(c).then(a=>a)),d.conn=await d.promise),d.conn}d||(d=a.g.mongoose={conn:null,promise:null}),a.s(["default",0,e])},78500,(a,b,c)=>{b.exports=a.x("node:async_hooks",()=>require("node:async_hooks"))},91222,a=>{"use strict";var b=a.i(16477),c=a.i(5072);async function d(d){a.r(55781);let{userId:e}=await (0,c.auth)({treatPendingAsSignedOut:null==d?void 0:d.treatPendingAsSignedOut});return e?(await (0,b.clerkClient)()).users.getUser(e):null}a.s(["currentUser",()=>d])},96598,a=>{"use strict";function b(a){return{id:a._id?.toString()||"",clerkId:String(a.clerkId||""),email:String(a.email||""),fullName:String(a.fullName||""),phone:String(a.phone||""),kycStatus:a.kycStatus||"pending",isAdmin:!!a.isAdmin,createdAt:(a.createdAt instanceof Date?a.createdAt.toISOString():a.createdAt?new Date(a.createdAt).toISOString():"")||"",updatedAt:(a.updatedAt instanceof Date?a.updatedAt.toISOString():a.updatedAt?new Date(a.updatedAt).toISOString():"")||""}}a.s(["serializeProfile",()=>b])},62888,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DashboardSidebar() from the server but DashboardSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/dashboard/sidebar.tsx <module evaluation>","DashboardSidebar");a.s(["DashboardSidebar",0,b])},54011,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DashboardSidebar() from the server but DashboardSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/dashboard/sidebar.tsx","DashboardSidebar");a.s(["DashboardSidebar",0,b])},21106,a=>{"use strict";a.i(62888);var b=a.i(54011);a.n(b)},96883,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DashboardHeader() from the server but DashboardHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/dashboard/header.tsx <module evaluation>","DashboardHeader");a.s(["DashboardHeader",0,b])},9094,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DashboardHeader() from the server but DashboardHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/dashboard/header.tsx","DashboardHeader");a.s(["DashboardHeader",0,b])},36176,a=>{"use strict";a.i(96883);var b=a.i(9094);a.n(b)},3605,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(5072),e=a.i(91222),f=a.i(22017),g=a.i(13761),h=a.i(21106),i=a.i(36176),j=a.i(96598);async function k({children:a}){let k=(await (0,d.auth)()).userId;k||(0,c.redirect)("/auth/login"),await (0,f.default)();let l=await g.Profile.findOne({clerkId:k}).lean();if(!l){let a=await (0,e.currentUser)();a||(0,c.redirect)("/auth/login"),l=(await g.Profile.create({clerkId:k,email:a.emailAddresses[0]?.emailAddress||"",fullName:a.fullName||"",phone:a.phoneNumbers[0]?.phoneNumber||"",kycStatus:"pending",isAdmin:!1})).toObject()}let m=(0,j.serializeProfile)(l);return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(h.DashboardSidebar,{profile:m}),(0,b.jsxs)("div",{className:"min-h-screen lg:ml-72",children:[(0,b.jsx)(i.DashboardHeader,{profile:m}),(0,b.jsx)("main",{className:"p-6",children:a})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__987b7903._.js.map