module.exports=[86607,a=>{"use strict";var b=a.i(40007),c=a.i(29171),d=a.i(40088),e=a.i(44632),f=a.i(72651),g=a.i(43917),h=a.i(73551),i=a.i(73739),j=a.i(86587),k=a.i(35108),l=a.i(1295),m=a.i(50961),n=a.i(72117),o=a.i(39363),p=a.i(22017),q=a.i(13761),r=a.i(43663);async function s(){await (0,p.default)();let a=[...new Set((await q.Account.find({}).lean()).map(a=>a.userId))].length,s=await q.Account.countDocuments(),t=await q.Transaction.find().sort({createdAt:-1}).limit(100).lean(),u=await q.Loan.find().lean(),v=await q.Profile.find({kycStatus:"pending"}).limit(5).lean(),w=await q.Loan.find({status:"pending"}).sort({createdAt:-1}).limit(5).lean(),x=await q.Transaction.find().sort({createdAt:-1}).limit(5).lean(),y=[...new Set([...new Set(w.map(a=>a.userId)),...new Set(x.map(a=>a.userId))])],z=await q.Loan.find({}).lean(),A=new Map;z.forEach(a=>{a.userName&&a.userEmail&&!A.has(a.userId)&&A.set(a.userId,{userName:a.userName,userEmail:a.userEmail})});let B=await (0,r.clerkClient)(),C=[];try{C=(await B.users.getUserList({limit:500})).data||[]}catch(a){console.error("Failed to fetch Clerk users:",a)}let D=new Map(C.map(a=>[a.id,a])),E=new Map;y.forEach(a=>{let b=D.get(a),c=A.get(a),d="Unknown User",e="";b?(d=b.firstName&&b.lastName?`${b.firstName} ${b.lastName}`:b.username||"Unknown User",e=b.emailAddresses[0]?.emailAddress||""):c&&(d=c.userName,e=c.userEmail),E.set(a,{userName:d,userEmail:e})});let F=w.map(a=>{let b=E.get(a.userId)||{userName:a.userName||"Unknown User",userEmail:a.userEmail||""};return{id:a._id.toString(),userId:a.userId,userName:b.userName,userEmail:b.userEmail,loanType:a.loanType,amount:a.amount,createdAt:a.createdAt.toISOString()}}),G=x.map(a=>{let b=E.get(a.userId)||{userName:a.userId||"Unknown",userEmail:""};return{id:a._id.toString(),userId:a.userId,userName:b.userName,accountId:a.accountId?.toString(),type:a.type,amount:a.amount,createdAt:a.createdAt.toISOString()}}),H=t?.filter(a=>"deposit"===a.type||"transfer_in"===a.type).reduce((a,b)=>a+Number(b.amount),0)||0,I=t?.filter(a=>"withdrawal"===a.type||"transfer_out"===a.type).reduce((a,b)=>a+Math.abs(Number(b.amount)),0)||0,J=u?.filter(a=>"pending"===a.status).length||0,K=u?.filter(a=>["approved","disbursed","active"].includes(a.status)).length||0,L=u?.filter(a=>["disbursed","active"].includes(a.status)).reduce((a,b)=>a+Number(b.amount),0)||0;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Admin Dashboard"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Overview of your banking system"})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-4",children:[(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:a}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Registered users"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-primary/10",children:(0,b.jsx)(h.Users,{className:"h-6 w-6 text-primary"})})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Accounts"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:s}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Active bank accounts"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-accent/10",children:(0,b.jsx)(i.Wallet,{className:"h-6 w-6 text-accent"})})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Deposits"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:(0,e.formatCurrency)(H)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This month"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-emerald-500/10",children:(0,b.jsx)(l.ArrowDownLeft,{className:"h-6 w-6 text-emerald-500"})})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Withdrawals"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:(0,e.formatCurrency)(I)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This month"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-destructive/10",children:(0,b.jsx)(m.ArrowUpRight,{className:"h-6 w-6 text-destructive"})})]})})})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-4",children:[(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Loans"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:J}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting approval"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-amber-500/10",children:(0,b.jsx)(n.Clock,{className:"h-6 w-6 text-amber-500"})})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Loans"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:K}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently active"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-primary/10",children:(0,b.jsx)(k.Landmark,{className:"h-6 w-6 text-primary"})})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Loan Portfolio"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:(0,e.formatCurrency)(L)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Total disbursed"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-accent/10",children:(0,b.jsx)(k.Landmark,{className:"h-6 w-6 text-accent"})})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Transactions"}),(0,b.jsx)("p",{className:"text-3xl font-semibold text-foreground mt-2 truncate",children:t.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Recent transactions"})]}),(0,b.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-muted-foreground/10",children:(0,b.jsx)(j.ArrowLeftRight,{className:"h-6 w-6 text-muted-foreground"})})]})})})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)(c.Card,{className:"border-0 shadow-sm",children:[(0,b.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,b.jsx)(c.CardTitle,{className:"text-lg font-semibold",children:"Pending Loans"}),(0,b.jsx)(f.default,{href:"/admin/loans",children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"gap-2",children:["View All",(0,b.jsx)(o.ArrowRight,{className:"h-4 w-4"})]})})]}),(0,b.jsx)(c.CardContent,{className:"space-y-4",children:0===F.length?(0,b.jsx)("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No pending loans"}):F.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/50 p-4 transition-colors hover:bg-muted/50",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.userName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.userEmail})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm font-semibold",children:(0,e.formatCurrency)(a.amount)}),(0,b.jsx)(d.Badge,{variant:"secondary",className:"mt-1",children:a.loanType})]})]},a.id))})]}),(0,b.jsxs)(c.Card,{className:"border-0 shadow-sm",children:[(0,b.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,b.jsx)(c.CardTitle,{className:"text-lg font-semibold",children:"Recent Transactions"}),(0,b.jsx)(f.default,{href:"/admin/transactions",children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"gap-2",children:["View All",(0,b.jsx)(o.ArrowRight,{className:"h-4 w-4"})]})})]}),(0,b.jsx)(c.CardContent,{className:"space-y-4",children:0===G.length?(0,b.jsx)("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No recent transactions"}):G.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/50 p-4 transition-colors hover:bg-muted/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${"deposit"===a.type||"transfer_in"===a.type||"credit"===a.type?"bg-emerald-500/10 text-emerald-500":"bg-destructive/10 text-destructive"}`,children:"deposit"===a.type||"transfer_in"===a.type||"credit"===a.type?(0,b.jsx)(l.ArrowDownLeft,{className:"h-5 w-5"}):(0,b.jsx)(m.ArrowUpRight,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium capitalize",children:a.type.replace("_"," ")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.userName})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:`text-sm font-semibold ${"deposit"===a.type||"transfer_in"===a.type||"credit"===a.type?"text-emerald-500":"text-destructive"}`,children:["deposit"===a.type||"transfer_in"===a.type||"credit"===a.type?"+":"-",(0,e.formatCurrency)(Math.abs(Number(a.amount)))]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,e.formatDateTime)(new Date(a.createdAt))})]})]},a.id))})]})]}),v.length>0&&(0,b.jsxs)(c.Card,{className:"border-0 shadow-sm",children:[(0,b.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,b.jsx)(c.CardTitle,{className:"text-lg font-semibold",children:"Pending KYC Approvals"}),(0,b.jsx)(f.default,{href:"/admin/users",children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"gap-2",children:["View All",(0,b.jsx)(o.ArrowRight,{className:"h-4 w-4"})]})})]}),(0,b.jsx)(c.CardContent,{children:(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border/50 p-4 transition-colors hover:bg-muted/50",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.fullName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.email})]}),(0,b.jsx)(d.Badge,{variant:"secondary",children:"Pending"})]},a._id.toString()))})})]})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=app_admin_page_tsx_02cd124a._.js.map