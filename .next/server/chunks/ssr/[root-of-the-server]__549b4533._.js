module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},6979,a=>{a.n(a.i(7978))},49140,a=>{a.n(a.i(11560))},37087,a=>{a.n(a.i(275))},60214,a=>{a.n(a.i(38227))},20779,a=>{"use strict";let b=(0,a.i(68476).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],20779)},67971,a=>{a.n(a.i(26435))},68476,a=>{"use strict";var b=a.i(17712);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],68476)},78500,(a,b,c)=>{b.exports=a.x("node:async_hooks",()=>require("node:async_hooks"))},43663,a=>{"use strict";a.i(9868);var b=a.i(26847),c=a.i(57729),d=a.i(87212),e=a.i(12175);let f=new(a.i(78500)).AsyncLocalStorage;var g=a.i(17898);let h=async()=>{var a,h;let i;try{let a=await (0,c.buildRequestLike)(),d=(0,e.getHeader)(a,b.constants.Headers.ClerkRequestData);i=(0,g.decryptClerkRequestData)(d)}catch(a){if(a&&(0,c.isPrerenderingBailout)(a))throw a}let j=null!=(h=null==(a=f.getStore())?void 0:a.get("requestData"))?h:i;return(null==j?void 0:j.secretKey)||(null==j?void 0:j.publishableKey)?(0,d.createClerkClientWithOptions)(j):(0,d.createClerkClientWithOptions)({})};a.s(["clerkClient",()=>h],43663)},40088,a=>{"use strict";let b,c;var d=a.i(40007),e=a.i(17712);function f(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}var g=e.forwardRef((a,b)=>{let{children:c,...f}=a,g=e.Children.toArray(c),i=g.find(j);if(i){let a=i.props.children,c=g.map(b=>b!==i?b:e.Children.count(a)>1?e.Children.only(null):e.isValidElement(a)?a.props.children:null);return(0,d.jsx)(h,{...f,ref:b,children:e.isValidElement(a)?e.cloneElement(a,void 0,c):null})}return(0,d.jsx)(h,{...f,ref:b,children:c})});g.displayName="Slot";var h=e.forwardRef((a,b)=>{let{children:c,...d}=a;if(e.isValidElement(c)){var g;let a,h,i=(g=c,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref);return e.cloneElement(c,{...function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props),ref:b?function(...a){return b=>{let c=!1,d=a.map(a=>{let d=f(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():f(a[b],null)}}}}(b,i):i})}return e.Children.count(c)>1?e.Children.only(null):null});h.displayName="SlotClone";var i=({children:a})=>(0,d.jsx)(d.Fragment,{children:a});function j(a){return e.isValidElement(a)&&a.type===i}var k=a.i(68962);let l=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,m=k.clsx;var n=a.i(82248);let o=(b="inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",c={variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}},a=>{var d;if((null==c?void 0:c.variants)==null)return m(b,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:e,defaultVariants:f}=c,g=Object.keys(e).map(b=>{let c=null==a?void 0:a[b],d=null==f?void 0:f[b];if(null===c)return null;let g=l(c)||l(d);return e[b][g]}),h=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return m(b,g,null==c||null==(d=c.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)});function p({className:a,variant:b,asChild:c=!1,...e}){let f=c?g:"span";return(0,d.jsx)(f,{"data-slot":"badge",className:(0,n.cn)(o({variant:b}),a),...e})}a.s(["Badge",()=>p],40088)},44632,a=>{"use strict";function b(a,c="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:c}).format(a)}function c(a){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(a))}function d(a){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a))}a.s(["formatCurrency",()=>b,"formatDate",()=>c,"formatDateTime",()=>d])},72117,a=>{"use strict";let b=(0,a.i(68476).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],72117)},58040,a=>{"use strict";let b=(0,a.i(68476).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],58040)},73551,a=>{"use strict";let b=(0,a.i(68476).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],73551)},28080,a=>{"use strict";let b=(0,a.i(12773).registerClientReference)(function(){throw Error("Attempted to call UserActionsDropdown() from the server but UserActionsDropdown is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/admin/user-actions-dropdown.tsx <module evaluation>","UserActionsDropdown");a.s(["UserActionsDropdown",0,b])},8952,a=>{"use strict";let b=(0,a.i(12773).registerClientReference)(function(){throw Error("Attempted to call UserActionsDropdown() from the server but UserActionsDropdown is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/admin/user-actions-dropdown.tsx","UserActionsDropdown");a.s(["UserActionsDropdown",0,b])},9669,a=>{"use strict";a.i(28080);var b=a.i(8952);a.n(b)},64277,a=>{"use strict";var b=a.i(40007),c=a.i(29171),d=a.i(40088),e=a.i(44632),f=a.i(9669),g=a.i(73551),h=a.i(58040),i=a.i(72117),j=a.i(20779),k=a.i(13761),l=a.i(22017),m=a.i(43663);async function n(n){await (0,l.default)();let o=parseInt((await n.searchParams).page||"1"),p=(o-1)*20,q=await k.Account.find({}).lean(),r=[...new Set(q.map(a=>a.userId))],s=await k.Profile.find({}).lean(),t=new Map(s.map(a=>[a.userId,a])),u=new Map(s.map(a=>[a.clerkId,a])),v=(await a.A(2050)).Loan,w=await v.find({}).lean(),x=new Map;w.forEach(a=>{a.userName&&a.userEmail&&!x.has(a.userId)&&x.set(a.userId,{userName:a.userName,userEmail:a.userEmail})});let y=await (0,m.clerkClient)(),z=[];try{z=(await y.users.getUserList({limit:500})).data||[]}catch(a){console.error("Failed to fetch Clerk users:",a)}let A=z.map(a=>a.id),B=s.map(a=>a.userId),C=new Set;A.forEach(a=>C.add(a)),B.forEach(a=>C.add(a)),r.forEach(a=>C.add(a));let D=Array.from(C).map(a=>{let b=q.find(b=>b.userId===a),c=z.find(b=>b.id===a),d=t.get(a);!d&&c&&(d=u.get(c.id));let e=x.get(a),f=!!c,g="Unknown User",h="No email";f&&c?(g=c.fullName||c.firstName||c.emailAddresses[0]?.emailAddress||"Unknown User",h=c.emailAddresses[0]?.emailAddress||"No email"):d?(g=d.fullName||a,h=d.email||"No email"):e?(g=e.userName,h=e.userEmail):(g=a,h="No email");let i="-";d?.phone&&""!==d.phone&&"-"!==d.phone?i=d.phone:c?.phoneNumbers?.[0]?.phoneNumber&&(i=c.phoneNumbers[0].phoneNumber);let j=d?.kycStatus||"pending";return{id:c?.id||d?._id?.toString()||b?._id?.toString()||a,userId:a,clerkId:c?.id||a,profileId:d?._id?.toString()||null,fullName:g,email:h,phone:i,isVerified:"approved"===j,kycStatus:j,isAdmin:d?.isAdmin||!1,createdAt:new Date(d?.createdAt||c?.createdAt||b?.createdAt||Date.now()).toISOString(),hasProfile:!!d,isRealUser:f,imageUrl:c?.imageUrl||null}});D.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime());let E=D.length,F=D.slice(p,p+20),G=Math.ceil(E/20),H=D.filter(a=>a.isVerified).length,I=D.filter(a=>!a.isVerified).length,J=D.filter(a=>a.isAdmin).length,K=D.filter(a=>a.isRealUser).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"User Management"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Manage users and profile verifications (",K," real,"," ",E-K," test)"]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4",children:[(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10",children:(0,b.jsx)(g.Users,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-primary truncate",children:E})]})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-yellow-500/10",children:(0,b.jsx)(i.Clock,{className:"h-5 w-5 text-yellow-600"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unverified"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-yellow-600 truncate",children:I})]})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-green-500/10",children:(0,b.jsx)(j.CheckCircle2,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Verified"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-green-600 truncate",children:H})]})]})})}),(0,b.jsx)(c.Card,{className:"border-0 shadow-sm",children:(0,b.jsx)(c.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-red-500/10",children:(0,b.jsx)(h.Shield,{className:"h-5 w-5 text-red-600"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Admins"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-red-600 truncate",children:J})]})]})})})]}),(0,b.jsxs)(c.Card,{className:"border-0 shadow-sm",children:[(0,b.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsx)(c.CardTitle,{children:"All Users"}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",p+1,"-",Math.min(p+20,E)," of"," ",E]})]}),(0,b.jsxs)(c.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground whitespace-nowrap",children:"User"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Phone"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Profile Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Type"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Role"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Joined"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:F?.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-[200px]",children:[a.imageUrl?(0,b.jsx)("img",{src:a.imageUrl,alt:a.fullName,className:"h-10 w-10 shrink-0 rounded-full"}):(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10 text-sm font-semibold text-primary",children:a.fullName?.charAt(0)?.toUpperCase()||"U"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-sm truncate",children:a.fullName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.email})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:a.phone}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.isVerified?(0,b.jsxs)(d.Badge,{className:"bg-green-500 hover:bg-green-600 text-white gap-1 whitespace-nowrap",children:[(0,b.jsx)(j.CheckCircle2,{className:"h-3 w-3"}),"Verified"]}):(0,b.jsxs)(d.Badge,{variant:"secondary",className:"gap-1 whitespace-nowrap",children:[(0,b.jsx)(i.Clock,{className:"h-3 w-3"}),"Unverified"]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.isRealUser?(0,b.jsx)(d.Badge,{variant:"default",className:"whitespace-nowrap bg-blue-500",children:"Real"}):(0,b.jsx)(d.Badge,{variant:"outline",className:"whitespace-nowrap",children:"Test"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.isAdmin?(0,b.jsx)(d.Badge,{variant:"destructive",className:"whitespace-nowrap",children:"Admin"}):(0,b.jsx)(d.Badge,{variant:"outline",className:"whitespace-nowrap",children:"User"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-xs text-muted-foreground whitespace-nowrap",children:(0,e.formatDateTime)(new Date(a.createdAt))}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsx)(f.UserActionsDropdown,{user:{_id:a.profileId||a.clerkId,userId:a.userId,clerkId:a.clerkId,hasProfile:a.hasProfile,fullName:a.fullName,email:a.email,phone:a.phone,isAdmin:a.isAdmin,kycStatus:a.kycStatus}})})]},a.id))})]})})}),G>1&&(0,b.jsxs)("div",{className:"px-6 py-4 border-t border-border flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",o," of ",G]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[o>1&&(0,b.jsx)("a",{href:`/admin/users?page=${o-1}`,children:(0,b.jsx)("button",{className:"px-3 py-1 text-sm border rounded hover:bg-muted",children:"Previous"})}),o<G&&(0,b.jsx)("a",{href:`/admin/users?page=${o+1}`,children:(0,b.jsx)("button",{className:"px-3 py-1 text-sm border rounded hover:bg-muted",children:"Next"})})]})]})]})]})]})}a.s(["default",()=>n])},2050,a=>{a.v(a=>Promise.resolve().then(()=>a(13761)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__549b4533._.js.map